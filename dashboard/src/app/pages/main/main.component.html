
<div id="main-div">
    <mat-card class="start-bot-card" *ngIf="!currentBot && !loading">
        <mat-card-header>
          <mat-card-title>Lancer un nouveau BOT</mat-card-title>
        </mat-card-header>

        <mat-card-content>
            <form>
                <mat-form-field>
                  <mat-label>Nom du BOT</mat-label>
                  <input matInput [(ngModel)]="botNameInput" [ngModelOptions]="{standalone: true}" placeholder="Joe">
                </mat-form-field>
            </form>

            <form>
              <mat-form-field>
                <mat-label>URL de la classe</mat-label>
                <input matInput [(ngModel)]="botUrlInput" [ngModelOptions]="{standalone: true}" placeholder="https://eu.bbcollab.com/guest/...">
              </mat-form-field>
            </form>

            <app-commands-list #commands></app-commands-list>

        </mat-card-content>

        <mat-divider></mat-divider>

        <button id="start-button" (click)="startBot()" mat-raised-button color="primary">Lancer !</button>

    </mat-card>

    <mat-card *ngIf="currentBot && !loading" class="statut-bot-card">
      <mat-card-header>
        <mat-card-title>Status du BOT</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <mat-card class="statut-connection-card">
          Status :
          <div *ngIf="!connected" class="statut-div">
            <mat-spinner diameter="20"></mat-spinner>
            {{connectionMessage}}
            <mat-icon class="not-connected-icon">signal_wifi_off</mat-icon>
          </div>
          
          <div *ngIf="connected" class="statut-div">
            Connecté
            <mat-icon class="connected-icon">signal_wifi_4_bar</mat-icon>
          </div>
        </mat-card>

        <div class="statut-name-url-div">
            <mat-card class="statut-name-card">
              Nom du BOT :  <b>{{currentBot.name}}</b>
            </mat-card>
        
            <mat-card class="statut-url-card">
              Connecté à : <b>{{currentBot.url}}</b>
            </mat-card>
        </div>

        <button id="disconnect-button" (click)="disconnectBot()" mat-raised-button color="primary">Déconnecter</button>
      </mat-card-content>
     
    </mat-card>

    <div *ngIf="loading">
      <mat-spinner></mat-spinner>
      Connexion en cours
    </div>

</div>
